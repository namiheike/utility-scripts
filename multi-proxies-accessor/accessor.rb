# proxies = File.read('./proxies.txt').lines.map(&:chop).shuffle
proxies = [["202.197.127.139", 1209, 0], ["222.82.222.242", 9999, 0], ["118.144.24.142", 8998, 0], ["61.152.81.193", 9100, 0], ["116.225.10.56", 9797, 0], ["142.4.210.208", 3129, 0], ["42.122.239.132", 9999, 0], ["121.32.251.44", 80, 0], ["59.61.89.233", 8800, 0], ["59.61.89.230", 8800, 0], ["111.13.109.27", 80, 0], ["106.46.136.56", 808, 0], ["218.66.253.145", 8800, 0], ["60.206.32.250", 8998, 0], ["218.201.98.196", 3128, 0], ["222.41.113.43", 8080, 0], ["106.46.136.17", 808, 0], ["59.61.89.229", 8800, 0], ["183.69.29.17", 9999, 0], ["122.230.30.4", 9999, 0], ["124.239.177.85", 8080, 0], ["218.65.30.28", 8118, 0], ["183.31.167.157", 9999, 0], ["218.66.253.146", 8800, 0], ["111.76.133.168", 808, 0], ["111.177.4.212", 9999, 0], ["106.46.136.119", 808, 0], ["162.105.80.111", 3128, 0], ["58.246.194.70", 8080, 0], ["60.169.78.218", 808, 0], ["111.76.133.64", 808, 0], ["120.132.71.212", 80, 0], ["121.32.251.43", 80, 0], ["58.59.68.91", 9797, 0], ["1.69.62.71", 9999, 0], ["124.91.34.190", 9999, 0], ["123.103.21.9", 8118, 0], ["58.217.195.141", 80, 0], ["113.117.204.99", 9999, 0], ["120.77.168.174", 80, 0], ["106.46.136.73", 808, 0], ["192.99.58.80", 3128, 0], ["111.40.84.73", 9999, 0], ["218.56.132.155", 8080, 0], ["121.32.251.45", 80, 0], ["42.59.124.94", 9999, 0], ["182.87.26.177", 8998, 0], ["221.237.154.58", 9797, 0], ["203.91.121.74", 3128, 0], ["58.216.14.22", 808, 0], ["123.234.233.91", 9999, 0], ["58.246.90.110", 3128, 0], ["202.195.176.93", 808, 0], ["124.64.216.170", 9999, 0], ["175.44.6.5", 8998, 0], ["113.200.29.10", 9999, 0], ["58.67.159.50", 80, 0], ["58.213.19.233", 10081, 0], ["182.92.234.104", 3128, 0], ["111.123.155.161", 9999, 0], ["106.115.139.189", 9999, 0], ["218.56.132.154", 8080, 0], ["123.138.216.91", 9999, 0], ["121.8.170.53", 9797, 0], ["120.77.212.139", 80, 0], ["101.254.188.198", 8080, 0], ["113.65.20.176", 9999, 0], ["192.99.128.170", 80, 0], ["180.107.218.134", 9999, 0], ["124.207.82.166", 8008, 0], ["218.56.132.156", 8080, 0], ["192.99.58.80", 8080, 0], ["118.119.168.172", 9999, 0], ["116.62.45.185", 3128, 0], ["27.191.234.69", 9999, 0], ["222.217.19.248", 8080, 0], ["1.82.216.135", 80, 0], ["106.46.136.50", 808, 0], ["47.90.75.157", 3128, 0], ["221.237.155.64", 9797, 0], ["121.40.108.76", 80, 0], ["125.31.19.26", 80, 0], ["113.200.159.155", 9999, 0], ["221.11.92.45", 8998, 0], ["124.89.35.206", 9999, 0], ["121.56.11.228", 8998, 0], ["221.237.154.57", 9797, 0], ["111.76.133.123", 808, 0], ["119.2.19.36", 9000, 0], ["119.188.162.218", 8080, 0], ["123.139.56.234", 9999, 0]]
proxies = proxies.map{|p| "#{p[0]}:#{p[1]}"}.shuffle

accessing_url = ARGV.first

# threads = []

count = 0

proxies.each do |p|
  puts "count: #{count += 1}"
  cmd = %{
    curl \\
      --verbose \\
      --proxy #{p} \\
      --user-agent "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.89 Safari/537.36" \\
      --referer http://user.qzone.qq.com/ \\
      #{accessing_url}
  }

  puts "running cmd"
  puts cmd
  `#{cmd}`
end

# threads.each(&:join)
